CREATE DATABASE JSNMPMonitor;
USE JSNMPMonitor;

CREATE TABLE SNMPAgent(
	agent_id int PRIMARY KEY NOT NULL,
	machine_name varchar(50),
	alias varchar(50),
	ipv4 varchar(15),
	ipv6 varchar(39),
	port int,
	read_com varchar(30),
	write_com varchar(30)
);

CREATE TABLE PDU(
	pdu_id int,
	type int,
	pdu_date datetime,
	agent_id int,
	PRIMARY KEY (pdu_id, pdu_date),
	CONSTRAINT fk_agentID_PDU FOREIGN KEY (agent_id) REFERENCES SNMPAgent(agent_id)
	ON DELETE CASCADE
	ON UPDATE CASCADE
);

CREATE TABLE VARBINDING(
	oid varchar(30) NOT NULL,
	value varchar(200),
	pdu_id int,
	pdu_date datetime,
	CONSTRAINT fk_pdu_var FOREIGN KEY (pdu_id, pdu_date) REFERENCES PDU(pdu_id, pdu_date) MATCH FULL
    ON DELETE CASCADE
    ON UPDATE CASCADE
	
);